<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT"
      crossorigin="anonymous"
    />

    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
      integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.min.js"
      integrity="sha384-7VPbUDkoPSGFnVtYi0QogXtr74QeVeeIs99Qfg5YCF+TidwNdjvaKZX19NZ/e6oz"
      crossorigin="anonymous"
    ></script>
    <link rel="stylesheet" href="/css/index.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
      integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <script
      src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
      integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
      integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
      integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
      crossorigin="anonymous"
    ></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
  </head>
  <body>
    <header id="header">
      <nav class="navbar navbar-light nav mb-4">
        <div
          class="container-fluid d-flex flex-direction-row justify-content-between"
        >
          <img
            src="/assets/tjslogo.png"
            alt="empty"
            width="20"
            height="20"
            class="logo"
          />
          <h1 class="navbar-brand ims-heading m-auto">
            Inventory Mangement System
          </h1>
        </div>
      </nav>
    </header>

    <!-- Main Site -->
    <main>
      <div>
        <!-- table-sm -->
        <table
          class="table m-5 container table-striped caption-top"
          id="assets-table"
        >
          <div
            class="d-flex flex-direction-row justify-content-end UnassignedBtn"
          >
            <a
              href="/assets"
              class="btn btn-outline-secondary negative-margin-end"
              >Unassigned <i class="fa-solid fa-angles-right"></i
            ></a>
          </div>

          <caption class="caption text-center">
            Assets
          </caption>

          <thead class="table-dark">
            <tr>
              <th scope="col">S.NO.</th>
              <th scope="col">Name</th>
              <th scope="col">Assets</th>
              <th scope="col">Description</th>
              <th scope="col">Updated Date</th>
              <th scope="col">Action</th>
            </tr>
          </thead>
          <tbody>
            <% users.forEach((user, i) => { %>
            <tr>
              <td><%= i + 1 %></td>
              <td><%= user.userName %></td>

              <td>
                <a class="anchorBtn" href="/usersHistory/<%= user._id %>">
                  <button type="submit" class="assetBtn">
                    <%= user.asset %>
                  </button>
                </a>
              </td>
              <td>
                <button
                  type="button"
                  class="btn btn-secondary aboutBtn"
                  data-toggle="tooltip"
                  data-placement="top"
                  title="<%= user.description %>"
                >
                  About
                </button>
              </td>

              <td><%= user.updatedAt %></td>
              <td>
                <button
                  class="btn btn-outline-secondary"
                  data-bs-toggle="modal"
                  data-bs-target="#pending<%= i + 1 %>"
                  id="requestBtn"
                >
                  Click here to Unassign
                </button>

                <button
                  type="button"
                  data-bs-toggle="modal"
                  class="btn btn-danger btn-link"
                  data-bs-target="#delete<%= i + 1 %>"
                  id="requestBtn"
                >
                  <i class="fa-solid fa-trash"></i>
                </button>
              </td>

              <!--Request Modal -->
              <form action="/updateAssets" method="POST">
                <div
                  class="modal fade"
                  id="pending<%= i + 1 %>"
                  data-bs-backdrop="static"
                  data-bs-keyboard="false"
                  tabindex="-1"
                  aria-labelledby="pending"
                  aria-hidden="true"
                >
                  <div class="modal-dialog">
                    <div
                      class="modal-content d-flex flex-direction-row justify-content-center"
                    >
                      <div class="modal-body pt-5">
                        <form class="row">
                          <div class="form-group">
                            <input
                              type="hidden"
                              name="id"
                              value="<%=user._id%>"
                            />
                          </div>

                          <div class="col-md-8 mb-3 m-3 m-auto">
                            <label
                              for="validationDefault01"
                              class="form-label inputPassword"
                              >Enter password</label
                            >
                            <input
                              type="password"
                              placeholder="Password"
                              class="form-control passwordField"
                              password="validationDefault01"
                              name="password"
                              autocomplete="off"
                              minlength="6"
                              required
                            />
                          </div>

                          <div
                            class="d-flex flex-direction-row justify-content-center align-items-center pt-5 pb-4"
                          >
                            <button
                              type="button"
                              class="btn btn-secondary m-2"
                              data-bs-dismiss="modal"
                            >
                              Close
                            </button>
                            <button type="submit" class="btn btn-primary m-2">
                              Save
                            </button>
                          </div>
                        </form>
                      </div>
                    </div>
                  </div>
                </div>
              </form>
              <!--Delete Modal -->
              <form action="/assets/delete" method="POST">
                <div
                  class="modal fade"
                  id="delete<%= i + 1 %>"
                  data-bs-backdrop="static"
                  data-bs-keyboard="false"
                  tabindex="-1"
                  aria-labelledby="pending"
                  aria-hidden="true"
                >
                  <div class="modal-dialog">
                    <div
                      class="modal-content d-flex flex-direction-row justify-content-center"
                    >
                      <div class="modal-body pt-5">
                        <form class="row">
                          <div class="form-group">
                            <input
                              type="hidden"
                              name="id"
                              value="<%=user._id%>"
                            />
                          </div>

                          <div class="col-md-8 mb-3 m-3 m-auto">
                            <label
                              for="validationDefault02"
                              class="form-label inputPassword"
                              >Enter password</label
                            >
                            <input
                              type="password"
                              placeholder="Password"
                              class="form-control passwordField"
                              password="validationDefault02"
                              name="password"
                              autocomplete="off"
                              minlength="6"
                              required
                            />
                          </div>

                          <div
                            class="d-flex flex-direction-row justify-content-center align-items-center pt-5 pb-4"
                          >
                            <button
                              type="button"
                              class="btn btn-secondary m-2"
                              data-bs-dismiss="modal"
                            >
                              Cancel
                            </button>
                            <button type="submit" class="btn btn-primary m-2">
                              Delete
                            </button>
                          </div>
                        </form>
                      </div>
                    </div>
                  </div>
                </div>
              </form>
            </tr>
            <% }) %>
          </tbody>
        </table>
        <!-- Button trigger modal -->
      </div>
    </main>
    <!-- /Main Site -->
  </body>
</html>
